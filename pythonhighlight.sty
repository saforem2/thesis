\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{pythonhighlight}[2011/09/19 python code highlighting; provided by Olivier Verdier <olivier.verdier@gmail.com>]


\RequirePackage{listings}
\RequirePackage{xcolor}

\renewcommand*{\lstlistlistingname}{Code Listings}
\renewcommand*{\lstlistingname}{Code Listing}

% \DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{12} % for bold
% \DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{12}  % for normal
% \usepackage{color}
\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}
\definecolor{deepblue}{rgb}{0,0,0.5}
% \definecolor{codeblue}{RGB}{93,173,226}
% \definecolor{codeblue}{RGB}{52,152,219}
\definecolor{codeblue}{RGB}{43, 120, 255}
\definecolor{deepblue}{RGB}{52, 105, 254}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}
\definecolor{codegreen}{RGB}{50, 135, 84}
\definecolor{codeteal}{RGB}{49, 165, 153}
\definecolor{brightgreen}{RGB}{64, 214, 111}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{darkgray}{rgb}{0.278,0.278,0.278}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
% \definecolor{codered}{RGB}{236,112,99}
% \definecolor{codered}{RGB}{231,76,60}
\definecolor{codered}{RGB}{189, 0, 83}
\definecolor{codeorange}{RGB}{230, 102, 10}
\definecolor{gray}{gray}{0.5}
\definecolor{greengray}{RGB}{147,193,164}

% \colorlet{stringcolour}{red!60!black}
% \colorlet{keywordcolour}{magenta!90!black}
% \colorlet{exceptioncolour}{yellow!50!red}
% \colorlet{commandcolour}{blue!60!black}
% \colorlet{numpycolour}{blue!60!green}
% \colorlet{literatecolour}{magenta!90!black}
% \colorlet{promptcolour}{green!50!black}
% \colorlet{specmethodcolour}{violet}

\colorlet{commentcolour}{codegreen}
\colorlet{stringcolour}{magenta}
\colorlet{keywordcolour}{codeblue}
\colorlet{exceptioncolour}{mygreen}
\colorlet{commandcolour}{codegreen}
\colorlet{numpycolour}{codered}
\colorlet{literatecolour}{codepurple}
\colorlet{promptcolour}{green!50!black}
\colorlet{specmethodcolour}{codeorange}
\colorlet{selfcolor}{codeteal}

\newcommand*{\framemargin}{3ex}

\newcommand*{\literatecolour}{\textcolor{literatecolour}}

\newcommand*{\pythonprompt}{\textcolor{promptcolour}{{>}{>}{>}}}

  %keepspaces=true,
  % basicstyle=\ttm,
\lstdefinestyle{mypython}{
  language=python,
  showtabs=true,
  tab=,
  tabsize=2,
  basicstyle=\ttfamily\footnotesize\setstretch{.9},
  stringstyle=\color{stringcolour},
  showstringspaces=false,
  alsoletter={1234567890},
  otherkeywords={\%, \}, \{, \&, \|},
  keywordstyle=\color{keywordcolour}\bfseries,
  emph={and,break,class,continue,def,yield,del,elif ,else,%
    except,exec,finally,for,from,global,if,import,in,%
  lambda,not,or,pass,print,raise,return,try,while,assert,with},
  emphstyle=\color{codeorange}\bfseries,
  emph={[2]True, False, None},
  emphstyle=[2]\color{codegreen},
  emph={[3]object, type, isinstance, copy, deepcopy, zip, enumerate, reversed, list, set, len, dict, tuple, xrange,
    append, execfile, real, imag, reduce, str, repr}, 
  emphstyle=[3]\color{commandcolour},
  emph={Exception,NameError,IndexError,SyntaxError,TypeError,ValueError,OverflowError,ZeroDivisionError},
  emphstyle=\color{exceptioncolour}\bfseries,
  %upquote=true,
  morecomment=[s]{"""}{"""},
  commentstyle=\color{codegray}\slshape,
  emph={[4]1, 2, 3, 4, 5, 6, 7, 8, 9, 0},
  emphstyle=[4]\color{numpycolour},
  emph={[5]ode, fsolve, sqrt, exp, sin, cos,arctan, arctan2, arccos, pi,  array, norm, solve, dot, arange, isscalar,
    max, sum, flatten, shape, reshape, find, any, all, abs, plot, linspace, legend, quad, polyval,polyfit, hstack,
    concatenate, vstack, column_stack, empty, zeros, ones, rand, vander, grid, pcolor, eig, eigs, eigvals, svd, qr,
    tan, det, logspace, roll, min, mean, cumsum, cumprod, diff, vectorize, lstsq, cla, eye, xlabel, ylabel, squeeze}, 
  emphstyle=[5]\color{numpycolour},
  emph={[5]__init__, __add__, __mul__, __div__, __sub__, __call__, __getitem__, __setitem__, __eq__, __ne__,
    __nonzero__, __rmul__, __radd__, __repr__, __str__, __get__, __truediv__, __pow__, __name__, __future__, __all__}, 
  emphstyle=[5]\color{specmethodcolour},
  emph={[6]assert,yield},
  emphstyle=[6]\color{keywordcolour}\bfseries,
  emph={[7]range},
  emphstyle={[7]\color{keywordcolour}\bfseries},
  emph={[8]self},
  emphstyle={[8]\color{selfcolor}\bfseries},
  % emph={[7]self},
  % emphstyle=[7]\bfseries,
  literate=*%
  {:}{{\literatecolour:}}{1}%
  {=}{{\literatecolour=}}{1}%
  {-}{{\literatecolour-}}{1}%
  {+}{{\literatecolour+}}{1}%
  {*}{{\literatecolour*}}{1}%
  {**}{{\literatecolour{**}}}{2}%
  {/}{{\literatecolour/}}{1}%
  {//}{{\literatecolour{//}}}{2}%
  {!}{{\literatecolour!}}{1}%
  {(}{{\literatecolour(}}{1}%
  {)}{{\literatecolour)}}{1}%
  {[}{{\literatecolour[}}{1}%
  {]}{{\literatecolour]}}{1}%
  {<}{{\literatecolour<}}{1}%
  {>}{{\literatecolour>}}{1}%
  {>>>}{\pythonprompt}{3},%
  frame=tb,
  rulecolor=\color{codegray},
  formfeed=\newpage,
  backgroundcolor=\color{white},
  breakindent=.5\textwidth,
  breaklines=true,
  xleftmargin=-20pt,
  xrightmargin=-20pt, 
  numbersep=10pt,
  numberstyle=\tiny\ttfamily\color{darkgray},
}
  %aboveskip=.5ex,
  %frameround=tttt,
  %framesep=.3ex,
  %framexleftmargin=\framemargin,
  %framextopmargin=.1ex,
  %framexbottommargin=.1ex,
  %framexrightmargin=\framemargin,
  %framexleftmargin=1mm, framextopmargin=1mm, frame=shadowbox, rulesepcolor=\color{blue},#1
  %frame=tb,

\newcommand*{\inputpython}[3]{\lstinputlisting[firstline=#2,lastline=#3,firstnumber=#2,breakindent=.5\textwidth,breaklines=true,style=mypython]{#1}}

\lstnewenvironment{python}[1][]{\lstset{style=mypython}}{}

\lstdefinestyle{mypythoninline}{%
  style=mypython,%
  basicstyle=\ttfamily,%
  keywordstyle=\color{keywordcolour},%
  emphstyle={[7]\color{keywordcolour}},%
  emphstyle=\color{exceptioncolour},%
  literate=*%
  {:}{{\literatecolour:}}{2}%
  {=}{{\literatecolour=}}{2}%
  {-}{{\literatecolour-}}{2}%
  {+}{{\literatecolour+}}{2}%
  {*}{{\literatecolour*}}2%
  {**}{{\literatecolour{**}}}3%
  {/}{{\literatecolour/}}{2}%
  {//}{{\literatecolour{//}}}{2}%
  {!}{{\literatecolour!}}{2}%
  {(}{{\literatecolour(}}{2}%
  {)}{{\literatecolour)}}{2}%
  {[}{{\literatecolour[}}{2}%
  {]}{{\literatecolour]}}{2}%
  {<}{{\literatecolour<}}{2}%
  {<=}{{\literatecolour{<=}}}3%
  {>}{{\literatecolour>}}{2}%
  {>=}{{\literatecolour{>=}}}3%
  {==}{{\literatecolour{==}}}3%
  {!=}{{\literatecolour{!=}}}3%
  {+=}{{\literatecolour{+=}}}3%
  {-=}{{\literatecolour{-=}}}3%
  {*=}{{\literatecolour{*=}}}3%
  {/=}{{\literatecolour{/=}}}3%
  %% emphstyle=\color{blue},%
}

\newcommand*{\pyth}{\lstinline[style=mypythoninline]}

\lstdefinestyle{custompython}{%
    % backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen}\itshape,
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{darkgray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    formfeed=\newpage,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=t,                    
    keepspaces=true,                 
    numbers=left,
    numbersep=5pt,
    showspaces=false,                
    showstringspaces=false,
    % morekeywords={models, lambda, self}, %, __init__, NOTE, Args, Returns}
    morekeywords={lambda}, %, __init__, NOTE, Args, Returns}
    % linewidth=79pt,
    xleftmargin=-20pt,
    xrightmargin=-20pt,
    showtabs=false,                  
    % captionpos=t,
    title=\lstname,
    tabsize=4
}

\lstdefinestyle{markdown}{%
    % backgroundcolor=\color{backcolour},
    % commentstyle=\color{codegreen}\itshape,
    % keywordstyle=\color{magenta},
    numberstyle=\tiny\color{darkgray},
    % stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize\setstretch{0.9},
    formfeed=\newpage,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=t,                    
    keepspaces=true,                 
    numbers=left,
    numbersep=10pt,
    showspaces=false,                
    showstringspaces=false,
    % morekeywords={models, lambda, self}
    % linewidth=79pt,
    xleftmargin=-20pt,
    xrightmargin=-20pt,
    showtabs=false,                  
    % captionpos=t,
    title=\lstname,
    tabsize=4
}

